---
description: Angular Material best practices and conventions
globs: ["src/app/**/*.ts", "src/app/**/*.html", "src/**/*.scss"]
alwaysApply: false
---

# Angular Material Best Practices

## Component Usage

### Import Only What You Need

```typescript
// ✅ Good - Import specific modules
import { MatButtonModule } from '@angular/material/button';
import { MatCardModule } from '@angular/material/card';
import { MatInputModule } from '@angular/material/input';

@Component({
  standalone: true,
  imports: [MatButtonModule, MatCardModule, MatInputModule],
  // ...
})
```

### Use Material Components Correctly

```html
<!-- ✅ Good - Proper Material component usage -->
<mat-card>
  <mat-card-header>
    <mat-card-title>Article Title</mat-card-title>
    <mat-card-subtitle>Subtitle</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <p>Content here</p>
  </mat-card-content>
  <mat-card-actions>
    <button mat-button>Action</button>
    <button mat-raised-button color="primary">Primary</button>
  </mat-card-actions>
</mat-card>
```

## Accessibility

### Use ARIA Attributes

Angular Material components handle ARIA automatically, but ensure custom components are accessible:

```html
<!-- ✅ Good - Accessible form -->
<form>
  <mat-form-field>
    <mat-label>Email</mat-label>
    <input matInput type="email" required>
    <mat-error>Email is required</mat-error>
  </mat-form-field>

  <button mat-raised-button type="submit" [disabled]="form.invalid">
    Submit
  </button>
</form>
```

### Keyboard Navigation

```typescript
// ✅ Good - Ensure keyboard navigation works
@Component({
  template: `
    <button mat-button (click)="save()" (keydown.enter)="save()">
      Save
    </button>
  `,
})
export class MyComponent {
  @HostListener('keydown.escape')
  onEscape(): void {
    this.close();
  }
}
```

### Focus Management

```typescript
// ✅ Good - Manage focus for dialogs
import { MatDialog } from '@angular/material/dialog';
import { FocusMonitor } from '@angular/cdk/a11y';

@Component({
  // ...
})
export class DialogComponent {
  constructor(
    private dialog: MatDialog,
    private focusMonitor: FocusMonitor
  ) {}

  openDialog(): void {
    const dialogRef = this.dialog.open(MyDialogComponent);
    dialogRef.afterClosed().subscribe(() => {
      // Return focus to trigger element
      this.focusMonitor.focusVia(this.triggerElement, 'program');
    });
  }
}
```

## Theming

### Use Material Theming APIs

**Never override Material CSS directly.** Use theming APIs:

```scss
// ✅ Good - Custom theme using Material APIs
@use '@angular/material' as mat;

// Include Material core styles
@include mat.core();

// Define custom palette
$my-primary: mat.define-palette(mat.$indigo-palette);
$my-accent: mat.define-palette(mat.$pink-palette, A200, A100, A400);
$my-warn: mat.define-palette(mat.$red-palette);

// Create theme
$my-theme: mat.define-light-theme((
  color: (
    primary: $my-primary,
    accent: $my-accent,
    warn: $my-warn,
  ),
  typography: mat.define-typography-config(),
  density: 0,
));

// Apply theme
@include mat.all-component-themes($my-theme);
```

### Dark Mode Support

```scss
// ✅ Good - Multiple themes with CSS variables
@use '@angular/material' as mat;

// Light theme
$light-theme: mat.define-light-theme(/* ... */);

// Dark theme
$dark-theme: mat.define-dark-theme(/* ... */);

// Apply light theme by default
@include mat.all-component-themes($light-theme);

// Dark mode
@media (prefers-color-scheme: dark) {
  @include mat.all-component-colors($dark-theme);
}

// Or use class-based switching
.dark-theme {
  @include mat.all-component-colors($dark-theme);
}
```

### Custom Component Theming

```scss
// ✅ Good - Theme custom components
@use '@angular/material' as mat;

.custom-component {
  // Use Material theme variables
  background-color: mat.get-color-from-palette($primary-palette, 500);
  color: mat.get-color-from-palette($primary-palette, '500-contrast');

  // Use typography
  @include mat.typography-level($typography-config, 'body-1');
}
```

## Forms

### Use Reactive Forms with Material

```typescript
// ✅ Good - Reactive forms with Material
import { FormBuilder, FormGroup, Validators, ReactiveFormsModule } from '@angular/forms';
import { MatFormFieldModule } from '@angular/material/form-field';
import { MatInputModule } from '@angular/material/input';

@Component({
  standalone: true,
  imports: [ReactiveFormsModule, MatFormFieldModule, MatInputModule],
  template: `
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <mat-form-field>
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" type="email" required>
        <mat-error *ngIf="form.get('email')?.hasError('required')">
          Email is required
        </mat-error>
        <mat-error *ngIf="form.get('email')?.hasError('email')">
          Invalid email format
        </mat-error>
      </mat-form-field>

      <button mat-raised-button type="submit" [disabled]="form.invalid">
        Submit
      </button>
    </form>
  `,
})
export class MyFormComponent {
  form: FormGroup;

  constructor(private fb: FormBuilder) {
    this.form = this.fb.group({
      email: ['', [Validators.required, Validators.email]],
    });
  }

  onSubmit(): void {
    if (this.form.valid) {
      console.log(this.form.value);
    }
  }
}
```

## Data Tables

### Use MatTable with Signals

```typescript
// ✅ Good - Material table with signals
import { MatTableModule } from '@angular/material/table';
import { signal } from '@angular/core';

@Component({
  standalone: true,
  imports: [MatTableModule],
  template: `
    <table mat-table [dataSource]="dataSource()">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let row">{{ row.name }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  `,
})
export class DataTableComponent {
  displayedColumns = ['name', 'email'];
  dataSource = signal<User[]>([]);

  ngOnInit(): void {
    this.loadData();
  }

  loadData(): void {
    this.userService.getUsers().subscribe(users => {
      this.dataSource.set(users);
    });
  }
}
```

## Dialogs

### Use MatDialog Properly

```typescript
// ✅ Good - Dialog component
import { MatDialog, MatDialogModule } from '@angular/material/dialog';
import { MatButtonModule } from '@angular/material/button';

@Component({
  selector: 'app-confirm-dialog',
  standalone: true,
  imports: [MatDialogModule, MatButtonModule],
  template: `
    <h2 mat-dialog-title>Confirm Action</h2>
    <mat-dialog-content>
      <p>Are you sure you want to proceed?</p>
    </mat-dialog-content>
    <mat-dialog-actions>
      <button mat-button [mat-dialog-close]="false">Cancel</button>
      <button mat-button [mat-dialog-close]="true" color="primary">Confirm</button>
    </mat-dialog-actions>
  `,
})
export class ConfirmDialogComponent {}

// Usage
@Component({
  // ...
})
export class MyComponent {
  constructor(private dialog: MatDialog) {}

  openDialog(): void {
    const dialogRef = this.dialog.open(ConfirmDialogComponent, {
      width: '400px',
    });

    dialogRef.afterClosed().subscribe(result => {
      if (result) {
        this.performAction();
      }
    });
  }
}
```

## Best Practices Summary

1. ✅ **Import only needed Material modules**
2. ✅ **Use Material theming APIs, never override CSS directly**
3. ✅ **Ensure keyboard navigation works**
4. ✅ **Use ARIA attributes for accessibility**
5. ✅ **Manage focus properly in dialogs**
6. ✅ **Use reactive forms with Material form fields**
7. ✅ **Support dark mode with theme switching**
8. ✅ **Test with screen readers and assistive technologies**
9. ✅ **Use Material components as intended**
10. ✅ **Ensure color contrast meets WCAG standards**

## Project Structure

**Frontend location:** `src/app/`

**Component organization:**
- Features: `src/app/features/`
- Core services: `src/app/core/services/`
- Shared components: `src/app/shared/components/`
- Layouts: `src/app/layouts/`

**Styling:**
- Global styles: `src/styles.scss`
- Component styles: `*.component.scss` (component-scoped)
